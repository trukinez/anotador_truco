<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset= "UTF-8"
			name="viewport"
			content="width=device-width, initial-scale=1.0">
		<title>Anotador de Truco</title>
		<script>
		let nos = 0;
		let filanos = 1;
		let filanos_aux = filanos;
		let ellos = 0;
		let filaellos = 1;
		let filaellos_aux = filaellos;
		let stringfila = "1";
		let id="";
		const scoreimg = [
			'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',
			'imagenes/1.png',
			'imagenes/2.png', 
			'imagenes/3.png',
			'imagenes/4.png',
			'imagenes/5.png'];

		function newGame() {
			if (confirm("Querés empezar una partida nueva?") == true) {
				location.reload();
			}
		}

		function changeScoreNos(value) {
			nos = nos + value;
			if (nos< 0) {nos = 0;}			
			if (nos> 30) {nos = 30;}


			filanos_aux = filanos;
			filanos = Math.ceil(nos/5) || 1; // Funcion mágica que agrega +1 cada 5 despues del 6

			if (filanos < filanos_aux) {
				id = "fila" + filanos_aux + "nos";
				const img = document.getElementById(id);
				if (img) {img.src = scoreimg[0];}
			}

			let imageIndex = nos % 5;
			if (imageIndex === 0 && nos > 0) imageIndex = 5;

			id = "fila" + filanos + "nos";
			const img = document.getElementById(id);

			if (img) {img.src = scoreimg[imageIndex];}
			if (nos >= 30) {
				setTimeout(function() {newGame();},250); // Timeout para que el dom renderice a tiempo la ultima imagen
			}
		}

		function changeScoreEllos(value) {
			ellos = ellos + value;
			if (ellos< 0) {ellos = 0;}			
			if (ellos> 30) {ellos = 30;}


			filaellos_aux = filaellos;
			filaellos = Math.ceil(ellos/5) || 1; // Funcion mágica que agrega +1 cada 5 despues del 6

			if (filaellos < filaellos_aux) {
				id = "fila" + filaellos_aux + "ellos";
				const img = document.getElementById(id);
				if (img) {img.src = scoreimg[0];}
			}

			let imageIndex = ellos % 5;
			if (imageIndex === 0 && ellos > 0) imageIndex = 5;

			id = "fila" + filaellos + "ellos";
			const img = document.getElementById(id);

			if (img) {img.src = scoreimg[imageIndex];}
			if (ellos >= 30) {
				setTimeout(function() {newGame();},250); // Timeout para que el dom renderice a tiempo la ultima imagen
			}

		}
		// Check current preference
		const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;

		if (isDarkMode) {
			console.log('User prefers dark mode');
		} else {
			console.log('User prefers light mode');
		}

		// Listen for changes
		const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');

		mediaQuery.addEventListener('change', (e) => {
			if (e.matches) {
				console.log('Switched to dark mode');
			} else {
				console.log('Switched to light mode');
			}
		});
		</script>

		<style>
		body{
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		text-align: center;
		background: #282828;
		}
		h1 {
		font-family: Arial;
		color: #d79921;
		}
		hr {
		margin-left: 0;
		margin-right: 0;
		width: 100%;
		foreground: #000000; 
		}
		table {
		table-layout: fixed;
		width: 60%;
		margin: 10px auto;
		border-collapse: collapse;
		}
		th {
		border-left: 1px solid #7c6f64;
		font-family: Arial;
		color: #ebdbb2;
		}
		table tr td:first-child, th:first-child{
		border-left: none;
		}
		td {
		padding: 0.6em;
		border: 1px solid #7c6f64;
		}
		tbody tr:nth-child(3n+2) {
		border-top: 1px solid #7c6f64;
		}
		img {
		max-width: 12%;
		max-height: 12%
		}
		.flex-fila {
		display: flex;
		justify-content: center;
		flex-wrap: wrap;
		}
		.flex-columna {
		display: flex;
		justify-content: center;
		flex-direction: column;
		}
		button {
		min-width: 50px;
		height: 45%;
		width:  45%;
		background: none;
		border-radius: 50px;
		color: #ebdbb2;
		}
		:root {
		--bg-primary: #ffffff;
		--bg-secondary: #f5f5f5;
		--text-primary: #1a1a1a;
		--text-secondary: #666666;
		--border-color: #e5e5e5;
		--accent: #0066ff;
		}

		/* Dark mode */
		@media (prefers-color-scheme: dark) {
		:root {
		--bg-primary: #1a1a1a;
		--bg-secondary: #2d2d2d;
		--text-primary: #ffffff;
		--text-secondary: #a0a0a0;
		--border-color: #404040;
		--accent: #4d94ff;
		}
		}
		</style>


	</head>
	<body>
		<h1>Anotador</h1>
		<hr>
		<div class="flex-fila">
			
		<div class="flex-columna">
		<button onclick="changeScoreNos(+1)">+</button>
		<button onclick="changeScoreNos(-1)">-</button>
		</div>
		<table>
			<tr>
				<th>Nos</th>
				<th>Ellos</th>
			</tr>
			<tr>
				<th><img id="fila1nos"
					src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
					alt=""></th>  
				<!-- 1px transparent encoded image 
				https://css-tricks.com/snippets/html/base64-encode-of-1x1px-transparent-gif/ -->
				<th><img id="fila1ellos" 
					src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" 
					alt=""></th>
			</tr>
			<tr>
				<th><img id="fila2nos"
					src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
					alt=""></th>
				<th><img id="fila2ellos"
					src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
					alt=""></th>
			</tr>
			<tr>
				<th><img id="fila3nos"
					src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
					alt=""></th>
				<th><img id="fila3ellos"
					src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
					alt=""></th>
			</tr>
			<tr>
				<th><img id="fila4nos"
					src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
					alt=""></th>
				<th><img id="fila4ellos"
					src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
					alt=""></th>
			</tr>
			<tr>
				<th><img id="fila5nos"
					src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
					alt=""></th>
				<th><img id="fila5ellos"
					src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
					alt=""></th>
			</tr>
			<tr>
				<th><img id="fila6nos"
					src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
					alt=""></th>
				<th><img id="fila6ellos"
					src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
					alt=""></th>
			</tr>

		</table>

		<div class="flex-columna">
		<button onclick="changeScoreEllos(+1)">+</button>
		<button onclick="changeScoreEllos(-1)">-</button>
		</div>

		</div>
		<button style="max-width:70px" onclick="newGame()">Nueva Partida</button>
	</body>

